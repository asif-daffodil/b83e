!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).eta={})}(this,function(t){function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function a(t,e,n){return a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&i(a,n.prototype),a},a.apply(null,arguments)}function s(t){var e="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return a(t,arguments,r(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,t)},s(t)}var o=/*#__PURE__*/function(){function t(t){this.cache=void 0,this.cache=t}var n=t.prototype;return n.define=function(t,e){this.cache[t]=e},n.get=function(t){return this.cache[t]},n.remove=function(t){delete this.cache[t]},n.reset=function(){this.cache={}},n.load=function(t){this.cache=e({},this.cache,t)},t}(),c=/*#__PURE__*/function(t){function e(e){var n;return(n=t.call(this,e)||this).name="Eta Error",n}return n(e,t),e}(/*#__PURE__*/s(Error)),l=/*#__PURE__*/function(t){function e(e){var n;return(n=t.call(this,e)||this).name="EtaParser Error",n}return n(e,t),e}(c),u=/*#__PURE__*/function(t){function e(e){var n;return(n=t.call(this,e)||this).name="EtaRuntime Error",n}return n(e,t),e}(c),f=/*#__PURE__*/function(t){function e(e){var n;return(n=t.call(this,e)||this).name="EtaNameResolution Error",n}return n(e,t),e}(c);function h(t,e,n){var r=e.slice(0,n).split(/\n/),i=r.length,a=r[i-1].length+1;throw t+=" at line "+i+" col "+a+":\n\n  "+e.split(/\n/)[i-1]+"\n  "+Array(a).join(" ")+"^",new l(t)}function p(t,e,n,r){var i=e.split("\n"),a=Math.max(n-3,0),s=Math.min(i.length,n+3),o=r,c=i.slice(a,s).map(function(t,e){var r=e+a+1;return(r==n?" >> ":"    ")+r+"| "+t}).join("\n"),l=new u((o?o+":"+n+"\n":"line "+n+"\n")+c+"\n\n"+t.message);throw l.name=t.name,l}var d=function(){return Promise.resolve()}.constructor;function g(t,e){var n=this.config,r=e&&e.async?d:Function;try{return new r(n.varName,"options",this.compileToString.call(this,t,e))}catch(n){throw n instanceof SyntaxError?new l("Bad template syntax\n\n"+n.message+"\n"+Array(n.message.length+1).join("=")+"\n"+this.compileToString.call(this,t,e)+"\n"):n}}function y(t,e){var n=this.config,r=e&&e.async,i=this.compileBody,a=this.parse.call(this,t),s=n.functionHeader+'\nlet include = (template, data) => this.render(template, data, options);\nlet includeAsync = (template, data) => this.renderAsync(template, data, options);\n\nlet __eta = {res: "", e: this.config.escapeFunction, f: this.config.filterFunction'+(n.debug?', line: 1, templateStr: "'+t.replace(/\\|"/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n")+'"':"")+"};\n\nfunction layout(path, data) {\n  __eta.layout = path;\n  __eta.layoutData = data;\n}"+(n.debug?"try {":"")+(n.useWith?"with("+n.varName+"||{}){":"")+"\n\n"+i.call(this,a)+"\nif (__eta.layout) {\n  __eta.res = "+(r?"await includeAsync":"include")+" (__eta.layout, {..."+n.varName+", body: __eta.res, ...__eta.layoutData});\n}\n"+(n.useWith?"}":"")+(n.debug?"} catch (e) { this.RuntimeErr(e, __eta.templateStr, __eta.line, options.filepath) }":"")+"\nreturn __eta.res;\n";if(n.plugins)for(var o=0;o<n.plugins.length;o++){var c=n.plugins[o];c.processFnString&&(s=c.processFnString(s,n))}return s}function v(t){for(var e=this.config,n=0,r=t.length,i="";n<r;n++){var a=t[n];if("string"==typeof a)i+="__eta.res+='"+a+"'\n";else{var s=a.t,o=a.val||"";e.debug&&(i+="__eta.line="+a.lineNo+"\n"),"r"===s?(e.autoFilter&&(o="__eta.f("+o+")"),i+="__eta.res+="+o+"\n"):"i"===s?(e.autoFilter&&(o="__eta.f("+o+")"),e.autoEscape&&(o="__eta.e("+o+")"),i+="__eta.res+="+o+"\n"):"e"===s&&(i+=o+"\n")}}return i}var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function x(t){return m[t]}var _={autoEscape:!0,autoFilter:!1,autoTrim:[!1,"nl"],cache:!1,cacheFilepaths:!0,debug:!1,escapeFunction:function(t){var e=String(t);return/[&<>"']/.test(e)?e.replace(/[&<>"']/g,x):e},filterFunction:function(t){return String(t)},functionHeader:"",parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],useWith:!1,varName:"it",defaultExtension:".eta"},b=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,w=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,S=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function E(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function F(t,e){return t.slice(0,e).split("\n").length}function O(t){var e=this.config,n=[],r=!1,i=0,a=e.parse;if(e.plugins)for(var s=0;s<e.plugins.length;s++){var o=e.plugins[s];o.processTemplate&&(t=o.processTemplate(t,e))}function c(t,i){t&&(t=function(t,e,n,r){var i,a;return Array.isArray(e.autoTrim)?(i=e.autoTrim[1],a=e.autoTrim[0]):i=a=e.autoTrim,(n||!1===n)&&(i=n),(r||!1===r)&&(a=r),a||i?"slurp"===i&&"slurp"===a?t.trim():("_"===i||"slurp"===i?t=t.trimStart():"-"!==i&&"nl"!==i||(t=t.replace(/^(?:\r\n|\n|\r)/,"")),"_"===a||"slurp"===a?t=t.trimEnd():"-"!==a&&"nl"!==a||(t=t.replace(/(?:\r\n|\n|\r)$/,"")),t):t}(t,e,r,i),t&&(t=t.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),n.push(t)))}e.rmWhitespace&&(t=t.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),b.lastIndex=0,w.lastIndex=0,S.lastIndex=0;for(var l,u=[a.exec,a.interpolate,a.raw].reduce(function(t,e){return t&&e?t+"|"+E(e):e?E(e):t},""),f=new RegExp(E(e.tags[0])+"(-|_)?\\s*("+u+")?\\s*","g"),p=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+E(e.tags[1])+")","g");l=f.exec(t);){var d=t.slice(i,l.index);i=l[0].length+l.index;var g=l[2]||"";c(d,l[1]),p.lastIndex=i;for(var y=void 0,v=!1;y=p.exec(t);){if(y[1]){var m=t.slice(i,y.index);f.lastIndex=i=p.lastIndex,r=y[2],v={t:g===a.exec?"e":g===a.raw?"r":g===a.interpolate?"i":"",val:m};break}var x=y[0];if("/*"===x){var _=t.indexOf("*/",p.lastIndex);-1===_&&h("unclosed comment",t,y.index),p.lastIndex=_}else"'"===x?(w.lastIndex=y.index,w.exec(t)?p.lastIndex=w.lastIndex:h("unclosed string",t,y.index)):'"'===x?(S.lastIndex=y.index,S.exec(t)?p.lastIndex=S.lastIndex:h("unclosed string",t,y.index)):"`"===x&&(b.lastIndex=y.index,b.exec(t)?p.lastIndex=b.lastIndex:h("unclosed string",t,y.index))}v?(e.debug&&(v.lineNo=F(t,l.index)),n.push(v)):h("unclosed tag",t,l.index)}if(c(t.slice(i,t.length),!1),e.plugins)for(var O=0;O<e.plugins.length;O++){var I=e.plugins[O];I.processAST&&(n=I.processAST(n,e))}return n}function I(t,e){var n=e&&e.async?this.templatesAsync:this.templatesSync;if(this.resolvePath&&this.readFile&&!t.startsWith("@")){var r=e.filepath,i=n.get(r);if(this.config.cache&&i)return i;var a=this.readFile(r),s=this.compile(a,e);return this.config.cache&&n.define(r,s),s}var o=n.get(t);if(o)return o;throw new f("Failed to get template '"+t+"'")}function A(t,n,r){var i,a=e({},r,{async:!1});return"string"==typeof t?(this.resolvePath&&this.readFile&&!t.startsWith("@")&&(a.filepath=this.resolvePath(t,a)),i=I.call(this,t,a)):i=t,i.call(this,n,a)}function P(t,n,r){var i,a=e({},r,{async:!0});"string"==typeof t?(this.resolvePath&&this.readFile&&!t.startsWith("@")&&(a.filepath=this.resolvePath(t,a)),i=I.call(this,t,a)):i=t;var s=i.call(this,n,a);return Promise.resolve(s)}function T(t,e){var n=this.compile(t,{async:!1});return A.call(this,n,e)}function j(t,e){var n=this.compile(t,{async:!0});return P.call(this,n,e)}var R=/*#__PURE__*/function(){function t(t){this.config=void 0,this.RuntimeErr=p,this.compile=g,this.compileToString=y,this.compileBody=v,this.parse=O,this.render=A,this.renderAsync=P,this.renderString=T,this.renderStringAsync=j,this.filepathCache={},this.templatesSync=new o({}),this.templatesAsync=new o({}),this.resolvePath=null,this.readFile=null,this.config=t?e({},_,t):e({},_)}var n=t.prototype;return n.configure=function(t){this.config=e({},this.config,t)},n.withConfig=function(t){return e({},this,{config:e({},this.config,t)})},n.loadTemplate=function(t,e,n){if("string"==typeof e)(n&&n.async?this.templatesAsync:this.templatesSync).define(t,this.compile(e,n));else{var r=this.templatesSync;("AsyncFunction"===e.constructor.name||n&&n.async)&&(r=this.templatesAsync),r.define(t,e)}},t}(),W=/*#__PURE__*/function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(R);t.Eta=W});
//# sourceMappingURL=browser.umd.js.map
